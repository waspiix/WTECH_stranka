(()=>{"use strict";(class extends Error{});class o extends Error{constructor(t){super(t),this.name="InvalidSDKConfig"}}const s=t=>parseFloat(String(t).replace(",",".").replace(/[^0-9.-]+/g,""));class e{name;priceVat;quantity;constructor(t,e,r){this.name=t,this.priceVat=s(e),this.quantity=s(r)}toJSON(){return{name:this.name,price_vat:this.priceVat,quantity:this.quantity}}}class t{createdAt;orderId;products;totalVat;currency;additionalItems;constructor(){this.createdAt=String(+new Date)}setOrderId(t){this.orderId=t?.toString()}addProduct(t){t&&(this.products||=[],this.products.push(t))}addAdditionalItem(t){t&&(this.additionalItems||=[],this.additionalItems.push(t))}setTotalVat(t){this.totalVat=s(t)}setCurrency(t){this.currency=t}toJSON(){return{order_id:this.orderId,products:this.products,total_vat:this.totalVat,currency:this.currency,created_at:this.createdAt,additional_items:this.additionalItems}}}const r=()=>document.cookie.split("; "),a=t=>{var e=new Date;return e.setDate(e.getDate()+t),e.toUTCString()},i=(t,e)=>{var r="expires="+a(30),e=encodeURIComponent(JSON.stringify(e));document.cookie=t+`=${e}; ${r}; path=/`};const n=e=>{var t=r().find(t=>t.startsWith(e+"="));return t?JSON.parse(decodeURIComponent(t.split("=")[1])):null};const c="hg_ocm_id",d=["hgtid","aku"],h=()=>new URLSearchParams(window.location.search);var p=()=>{var t;d.some(t=>h().has(t))&&(t=(()=>{const e=h();var t=d.find(t=>e.has(t));return t?{[t]:e.get(t)}:null})(),i(c,t))};const u={hgtid:"track_id"};class l{order;pairingData;setOrder(t){this.order=t}setDataFromCookies(){var t=(t=>{var e={};if(null===t)return null;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[u[r]||r]=t[r]);return e})(n(c))??{};t.consent=!!n(c),this.pairingData=t}toJSON(){return{order:this.order?.toJSON(),pairing_data:this.pairingData}}}class _{itemId;name;priceVat;quantity;constructor(t,e,r,a){this.itemId=t.toString(),this.name=e,this.priceVat=s(r),this.quantity=s(a)}toJSON(){return{item_id:this.itemId,name:this.name,price_vat:this.priceVat,quantity:this.quantity}}}const R=3,E=5e3,I=t=>{var{endpoint:t,apiKey:e,payload:r,scriptParams:{source:a,version:s,page:o}}=t;return(async(t,r)=>{for(let e=1;e<=R;e++)try{await fetch(t,r);return}catch(t){if(e>=R)throw t;await m(E)}})(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({...r.toJSON(),source:a,version:s,page:o})})},m=e=>new Promise(t=>setTimeout(t,e)),O=()=>{var t=window.ROIDataObject;return window[t]};class y{queue=[];scriptParams;order;apiKey;payload;ROIHarvesterEndpoint;countryCode;constructor(t,e,r){this.queue=t,this.scriptParams=r,this.payload=new l,this.payload.setDataFromCookies(),this.countryCode=e;t="ROI_HARVESTER_ENDPOINT_"+this.countryCode.toUpperCase();if(this.ROIHarvesterEndpoint={ROI_HARVESTER_ENDPOINT_CZ:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_SK:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",GCP_ENVIRONMENT:"prod"}[t]||"",!this.ROIHarvesterEndpoint)throw new o("SDK is not implemented properly! (No Harvester endpoint found)")}static init=r=>{let a=0;const s=setInterval(()=>{var t=O(),e=t.q,t=t.c;if((a+=1,e&&"function"==typeof e.push&&e.constructor==Array&&(new y(e,t,r).process(),clearInterval(s)),25<a&&"shoprenter"!=r.source)&&(clearInterval(s),!({ROI_HARVESTER_ENDPOINT_CZ:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_SK:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",GCP_ENVIRONMENT:"prod"}["ROI_HARVESTER_ENDPOINT_"+t.toUpperCase()]||"")))throw new o("SDK is not implemented properly! (No Harvester endpoint found)")},200)};process(){this.order=new t,this.queue.filter(t=>2<=t.length).forEach(t=>{switch(t[0]){case"authenticate":this.apiKey=t[1];break;case"set_order_id":this.order.setOrderId(t[1]);break;case"add_product":this.order.addProduct(new _(t[1]??"",t[2]??"",t[3]??"",t[4]??""));break;case"add_additional_item":this.order.addAdditionalItem(new e(t[1]??"",t[2]??"",t[3]??""));break;case"set_total_vat":this.order.setTotalVat(t[1]);break;case"set_currency":this.order.setCurrency(t[1]);break;case"clear":this.clearData();break;case"send":if("Order"===t[1]){this.payload.setOrder(this.order);try{this.sendPayload()}finally{this.clearData()}}}})}clearData(){O().q=[],this.order.products=[],this.order.additionalItems=[]}async sendPayload(){await I({endpoint:this.ROIHarvesterEndpoint,apiKey:this.apiKey??"",payload:this.payload,scriptParams:this.scriptParams,countryCode:this.countryCode})}}try{p();var N=(t=>{var e=document.currentScript.src.split("?")[1];const r=new URLSearchParams(e);return t.reduce((t,e)=>(t[e]=r.get(e),t),{})})(["source","version","page"]);(class y{queue=[];scriptParams;order;apiKey;payload;ROIHarvesterEndpoint;countryCode;constructor(t,e,r){if(this.queue=t,this.scriptParams=r,this.payload=new l,this.payload.setDataFromCookies(),this.countryCode=e,t="ROI_HARVESTER_ENDPOINT_"+this.countryCode.toUpperCase(),this.ROIHarvesterEndpoint={ROI_HARVESTER_ENDPOINT_CZ:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_SK:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",GCP_ENVIRONMENT:"prod"}[t]||"",!this.ROIHarvesterEndpoint)throw new o("SDK is not implemented properly! (No Harvester endpoint found)")}static init=r=>{let a=0;const s=setInterval(()=>{var t=(e=O()).q,e=e.c;if(a+=1,t&&"function"==typeof t.push&&t.constructor==Array&&(new y(t,e,r).process(),clearInterval(s)),25<a&&"shoprenter"!=r.source&&(clearInterval(s),!{ROI_HARVESTER_ENDPOINT_CZ:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_SK:"https://harvester.ocm.heureka.group",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",GCP_ENVIRONMENT:"prod"}["ROI_HARVESTER_ENDPOINT_"+e.toUpperCase()]))throw new o("SDK is not implemented properly! (No Harvester endpoint found)")},200)};process(){this.order=new t,this.queue.filter(t=>2<=t.length).forEach(t=>{switch(t[0]){case"authenticate":this.apiKey=t[1];break;case"set_order_id":this.order.setOrderId(t[1]);break;case"add_product":this.order.addProduct(new _(t[1]??"",t[2]??"",t[3]??"",t[4]??""));break;case"add_additional_item":this.order.addAdditionalItem(new e(t[1]??"",t[2]??"",t[3]??""));break;case"set_total_vat":this.order.setTotalVat(t[1]);break;case"set_currency":this.order.setCurrency(t[1]);break;case"clear":this.clearData();break;case"send":if("Order"===t[1]){this.payload.setOrder(this.order);try{this.sendPayload()}finally{this.clearData()}}}})}clearData(){O().q=[],this.order.products=[],this.order.additionalItems=[]}async sendPayload(){await I({endpoint:this.ROIHarvesterEndpoint,apiKey:this.apiKey??"",payload:this.payload,scriptParams:this.scriptParams,countryCode:this.countryCode})}}).init(N)}catch(t){if(!(t instanceof o||!1))throw t;console.error(t.message)}})();