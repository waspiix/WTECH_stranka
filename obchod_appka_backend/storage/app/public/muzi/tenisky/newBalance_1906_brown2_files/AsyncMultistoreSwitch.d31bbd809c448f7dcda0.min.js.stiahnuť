(window.webpackJsonp=window.webpackJsonp||[]).push([["AsyncMultistoreSwitch"],{"3EdS":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l}));a("UxlC"),a("3bBZ"),a("Kz25");var c=a("sCY6"),s=a("UIBx");const n={CONFIRM:"language_switcher_confirm",CLOSE:"language_switcher_close",CHANGE:"language_change"};function r({event:e,type:t,suggested:a,selected:c}){const r=e===n.CONFIRM?{switcher:{type:t,suggested:a,selected:c}}:{};Object(s.a)({event:e,...r,_clear:!0})}function l({id:e,language:t,currency:a,url:r}){let l=new URL(r).hostname.replace("www.","");const o=t.toLowerCase();e!==c.H.AT&&e!==c.H.EU||(l=`${l}/${o}`),Object(s.a)({event:n.CHANGE,language:o,currency:a,site:l,_clear:!0})}},"Fl+a":function(e,t,a){"use strict";a.r(t);var c=a("q1tI"),s=a.n(c),n=a("aoTL"),r=a("Ehug"),l=(a("3bBZ"),a("TSYQ")),o=a.n(l),i=a("bsWm"),u=a("3EdS"),m="ShopItem_item_3_lZ-",h="ShopItem_active_20vkU";function g({shop:e,currentShop:t,flagClass:a,activeItemClass:c}){const{generalStore:n}=Object(r.Z)();return s.a.createElement("a",{href:e.url,className:o()(m,{[h]:e.id===t.id,[c]:e.id===t.id}),onClick:function(){const t=n.getShop(e.id);t&&Object(u.b)({id:t.id,language:t.language,currency:t.currency,url:t.url})}},s.a.createElement(i.x,{className:a,shopId:e.id}),e.name," (",e.currency,")")}var p="ShopsList_shopsList_1LRt3",S="ShopsList_flag_2wsIn";function b({shops:e,currentShop:t,className:a,activeItemClass:c}){return s.a.createElement("ul",{className:o()(p,a)},[...e.values()].map(e=>e.url&&s.a.createElement("li",{key:e.url},s.a.createElement(g,{flagClass:S,shop:e,currentShop:t,activeItemClass:c}))))}var d=a("MBi9"),f=a.n(d),v=a("SYWT"),E="LanguageSwitch_wrapper_1oAqD",w="LanguageSwitch_lang_1L5WF";const _=Object(n.b)(({shop_id:e,url:t,lang_code:a,current:c})=>{const{generalStore:{shops:n}}=Object(r.Z)(),l=c?"span":"a";return s.a.createElement(l,{href:c?void 0:t,className:w,onClick:c?void 0:function(){var c;Object(u.b)({id:e,language:a,currency:null===(c=n.get(e))||void 0===c?void 0:c.currency,url:t})}},a)}),O=({languages:e})=>Object(v.T)(e)?null:s.a.createElement("div",{className:E},e.map(e=>s.a.createElement(_,f()({key:e.lang_code},e))));var C="MultistoreSwitch_multistoreSwitch_1c5Os",N="MultistoreSwitch_button_uJWD1",j="MultistoreSwitch_buttonText_3JNYO",M="MultistoreSwitch_spinner_MVOpi",L="MultistoreSwitch_flag_3upTB";const I=Object(n.b)((function({className:e,shopListClassName:t,spinnerClassName:a,activeItemClass:n}){const{generalStore:l,generalStore:{currentShop:u,shops:m,shopLanguages:h},urlStore:g,translationStore:p,visualStore:S}=Object(r.Z)(),[d,f]=Object(c.useState)(!1),[E,w]=Object(c.useState)(h);return Object(c.useEffect)(()=>{h.some(e=>e.url.indexOf("template")>-1)&&(m.size>0||r.X.fetchMultistoreData(g,p).then(e=>{l.setShops(e),w(Object(v.c)(E.slice(),e))}).catch(e=>{console.error(e)}))},[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(O,{languages:E}),s.a.createElement("div",{className:o()(C,e)},s.a.createElement("button",{className:N,onClick:function(e){e.preventDefault(),m.size>0?S.toggleMultistoreSwitch():(f(!0),r.X.fetchMultistoreData(g,p).then(e=>{l.setShops(e),f(!1),w(Object(v.c)(E.slice(),e)),S.toggleMultistoreSwitch()}).catch(e=>{console.error(e)}))},"aria-label":"Change shop language and country"},d?s.a.createElement(i.nb,{className:o()(M,a)}):s.a.createElement(s.a.Fragment,null,s.a.createElement(i.x,{className:L,shopId:u.id}),s.a.createElement("span",{className:j},u.name))),s.a.createElement(i.Db,{name:"fade"},S.activeMultistoreSwitch&&s.a.createElement(b,{className:t,shops:m,currentShop:u,activeItemClass:n}))))}));var y="MultistoreSwitch_button_3L3n6",k="MultistoreSwitch_flag_3-JPu",D="MultistoreSwitch_wrapper_b-6af";const x=Object(n.b)((function(){const{generalStore:e,generalStore:{currentShop:t,shops:a,shopLanguages:n},urlStore:l,translationStore:o,visualStore:u}=Object(r.Z)(),[m,h]=Object(c.useState)(!1),[g,p]=Object(c.useState)(n);return Object(c.useEffect)(()=>{n.some(e=>e.url.indexOf("template")>-1)&&(a.size>0||r.X.fetchMultistoreData(l,o).then(t=>{e.setShops(t),p(Object(v.c)(g.slice(),t))}).catch(e=>{console.error(e)}))},[]),s.a.createElement("div",null,s.a.createElement("button",{className:y,onClick:t=>function(t){t.preventDefault(),a.size>0?u.toggleMultistoreSwitch():(h(!0),r.X.fetchMultistoreData(l,o).then(t=>{e.setShops(t),h(!1),p(Object(v.c)(g.slice(),t)),u.toggleMultistoreSwitch()}).catch(e=>{console.error(e)}))}(t),"aria-label":"Change shop language and country"},u.activeMultistoreSwitch?s.a.createElement(i.ob,{id:"arrow-back"}):m?s.a.createElement(i.nb,null):s.a.createElement(i.x,{className:k,shopId:t.id})),s.a.createElement(O,{languages:g}),s.a.createElement(i.Db,{name:"slideLeft"},u.activeMultistoreSwitch&&s.a.createElement("div",{className:D},s.a.createElement(b,{shops:a,currentShop:t}))))}));t.default=Object(n.b)((function({className:e,shopListClassName:t,spinnerClassName:a,activeItemClass:n}){const{deviceStore:{isTablet:l,isUntilDesktop:o},visualStore:i}=Object(r.Z)(),u=Object(c.useRef)();function m(e){u.current&&!u.current.contains(e.target)&&i.resetActiveMultistoreSwitch()}return Object(c.useEffect)(()=>(document.addEventListener("click",m),()=>{document.removeEventListener("click",m)}),[]),Object(c.useEffect)(()=>{i.resetActiveMultistoreSwitch()},[l]),s.a.createElement("div",{ref:u},o?s.a.createElement(x,null):s.a.createElement(I,{className:e,shopListClassName:t,spinnerClassName:a,activeItemClass:n}))}))}}]);
//# sourceMappingURL=AsyncMultistoreSwitch.d31bbd809c448f7dcda0.min.js.map